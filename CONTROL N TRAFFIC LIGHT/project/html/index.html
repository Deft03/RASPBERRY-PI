<!DOCTYPE html>
  <!-- Coding by CodingLab | www.codinglabweb.com -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!----======== CSS ======== -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css">
    <!----===== Boxicons CSS ===== -->
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js" ></script>
    <!--<title>Dashboard Sidebar Menu</title>--> 
</head>
<body>
    <nav class="sidebar close">
        <header>
            <div class="image-text">
                <span class="image">
                    <img src="img/iot.jpg" alt="anh">
                </span>

                <div class="text logo-text">
					<div class="left_area">
						<h3>IOT TRONG  <span>CƠ ĐIỆN TỬ</span></h3>
					</div>
                    
                    <span class="profession">Internet of Things</span>
                </div>
            </div>

            <i class='bx bx-chevron-right toggle'></i>
        </header>

        <div class="menu-bar">
            <div class="menu">
                <ul class="menu-links">
                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-home-alt icon' ></i>
                            <span class="text nav-text">Traffic-light</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-bell icon'></i>
                            <span class="text nav-text">Notifications</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-pie-chart-alt icon' ></i>
                            <span class="text nav-text">Analytics</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-heart icon' ></i>
                            <span class="text nav-text">Likes</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="#">
                            <i class='bx bx-cog icon'></i>
                            <span class="text nav-text">Setting</span>
                        </a>
                    </li>

                </ul>
            </div>

            <div class="bottom-content">
                <li class="logout">
                    <a href="#">
                        <i class='bx bx-log-out icon' ></i>
                        <span class="text nav-text">Logout</span>
                    </a>
                </li>

                <li class="mode">
                    <div class="sun-moon">
                        <i class='bx bx-moon icon moon'></i>
                        <i class='bx bx-sun icon sun'></i>
                    </div>
                    <span class="mode-text text">Dark mode</span>

                    <div class="toggle-switch">
                        <span class="switch"></span>
                    </div>
                </li>
                
            </div>
        </div>

    </nav>

    <section class="home">
    
        
    <body>
        <div class="wrapper border border-2 rounded border-primary">
            <h3>TRAFICLIGHT CONTROL </h3>
            <br>
            <form id ="form" >    
                <div class="mb-3">
                    <label  class = "form-label" for="DEN">CHON DEN:</label>
                    <select class="form-select form-select-sm" aria-label=".form-select-lg example" name = "den" id="den">
                        <option selected>Open this select menu</option>
                        <option value="1">DEN1</option>
                        <option value="2">DEN2</option>
                      </select>
                           <h3> RED:<input type="number" class="form-range" name="r"  id="red"></h3>
                           <h3>  YELLOW:<input type="number" class="form-range" name="y"  id="yellow"></h3>
                           <h3>  GREEN:<input type="number" class="form-range" name="g"  id="green"></h3>
                            
                </div>
                <div class="mb-3">
                    <input type="submit" class="btn btn-primary" value="Apply">
                </div>
            </form>
        </div>
        <div class="wrapper border border-2 rounded border-primary">
            <h3>MONITOR</h3>
            <br>
            <table class="table table_size";>
                <thead>
                  <tr>
                  <th scope="col">ID</th>
                    <th scope="col">COLOR</th>
                    <th scope="col">Thời Gian</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row" class = "middle" >1:</th>
                    <td><img src= "img/red.jpg" class="rounded-circle" width="30" id="light1" alt="..."></img></td>
                    <td class = "middle" id ="time1"></td>
                  </tr>
                  <tr>
                    <th scope="row" class = "middle">2:</th>
                    <td><img src="img/red.jpg" class="rounded-circle" width="30" id="light2" alt="..."></img></td>
                    <td class = "middle" id ="time2"></td>
                  </tr>
                </tbody>
              </table>
        </div>
        <div class="team">
         <nav>
            <ul>
              <li><a href="team.html">Nhóm</a></li> 
            </ul>
          </nav>
        </div>


    </section>
    <script>
    const body = document.querySelector('body'),
      sidebar = body.querySelector('nav'),
      toggle = body.querySelector(".toggle"),
      
      modeSwitch = body.querySelector(".toggle-switch"),
      modeText = body.querySelector(".mode-text");


toggle.addEventListener("click" , () =>{
    sidebar.classList.toggle("close");
})


modeSwitch.addEventListener("click" , () =>{
    body.classList.toggle("dark");
    
    if(body.classList.contains("dark")){
        modeText.innerText = "Light mode";
    }else{
        modeText.innerText = "Dark mode";
        
    }
});
    </script>
    <script>
        $(document).ready(function(){
            $(document).on('submit','#form', function(){ 
                $.post('addtime.php',$('#form').serialize());  // gui yeu cau POST 
                return false;                                          // serialize data thanh chuoi
            });
        });
        updatetime();
        setInterval(updatetime,1000); // repeat ham updateRGB moi 1s
        function updatetime(){
            // gui http request xuong server
            $.post("readdb.php",
            function(data){
                // doc gia tri tu server gui len                
                var mode1 = data[0].mode;
                var count = Number(data[0].count);
                if (mode1 =='1'){
                  var color1 = "./red.jpg";

                  document.getElementById("light1").src = color1;
                  document.getElementById("time1").innerHTML= count;


                }
                if (mode1 =='2'){
                  var color1 = "./green.jpg";
                  
                  document.getElementById("light1").src = color1;
                  document.getElementById("time1").innerHTML= count;


                }
                if (mode1 =='3'){
                  var color1 = "./yellow.jpg";
                  document.getElementById("light1").src = color1;
                  document.getElementById("time1").innerHTML= count;


                }

                var mode2 = data[1].mode;
                var count2 = Number(data[1].count);
                if (mode2 =='1'){
                  var color2 = "./red.jpg";
                  document.getElementById("light2").src = color2;
                  document.getElementById("time2").innerHTML= count2; 
                }
                if (mode2 =='3'){
                  var color2 = "./green.jpg";
                  document.getElementById("light2").src = color2;
                  document.getElementById("time2").innerHTML= count2; 
                }
                if (mode2 =='2'){
                  var color2 = "./yellow.jpg";
                  document.getElementById("light2").src = color2;
                  document.getElementById("time2").innerHTML= count2; 
                }
               // gan gia cho cac phan tu
            //   document.getElementById("light1").src = color1;
            //   document.getElementById("light2").src = color2; 
              }) 
          }
           
    </script>

</body>
</html>
